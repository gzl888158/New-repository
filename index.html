<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è±†åŒ…æ­æ¡£Â·æ¬§æ˜“ä¸“å±äº¤æ˜“è¾…åŠ©å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            background: #121212;
            color: #fff;
            padding: 10px;
            line-height: 1.5;
        }
        .header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #4CAF50;
        }
        .status {
            font-size: 14px;
            margin-bottom: 10px;
            color: #ff9800;
        }
        .danger-status {
            color: #f44336;
            font-weight: bold;
        }
        .coin-tab {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            overflow-x: auto;
            padding-bottom: 5px;
        }
        .coin-tab button {
            padding: 6px 12px;
            border: none;
            border-radius: 5px;
            background: #333;
            color: #fff;
            font-size: 14px;
            cursor: pointer;
            white-space: nowrap;
            touch-action: manipulation;
        }
        .coin-tab button.active {
            background: #4CAF50;
        }
        .analysis {
            background: #1e1e1e;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 14px;
        }
        .func-btn-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        .func-btn {
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: #2196F3;
            color: #fff;
            font-size: 14px;
            cursor: pointer;
            touch-action: manipulation;
        }
        .func-btn.secondary {
            background: #607D8B;
        }
        .func-btn.danger {
            background: #f44336;
        }
        .risk-group {
            background: #1e1e1e;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .risk-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #ff9800;
        }
        .input-group {
            margin-bottom: 10px;
        }
        .input-group label {
            font-size: 14px;
            display: block;
            margin-bottom: 5px;
        }
        .input-group input {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #333;
            background: #333;
            color: #fff;
            font-size: 14px;
        }
        .alert-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #2d2d2d;
            border: 1px solid #4CAF50;
            border-radius: 10px;
            padding: 20px;
            width: 90%;
            max-width: 400px;
            z-index: 9999;
            text-align: center;
        }
        .danger-alert {
            border-color: #f44336;
        }
        .review-alert {
            border-color: #4CAF50;
            z-index: 10000;
        }
        .alert-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #f44336;
        }
        .review-title {
            color: #4CAF50;
        }
        .alert-btn {
            padding: 8px 16px;
            margin: 0 5px;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            min-width: 80px;
            touch-action: manipulation;
        }
        .confirm-btn {
            background: #2196F3;
            color: #fff;
        }
        .ignore-btn {
            background: #607D8B;
            color: #fff;
        }
        .shortcut {
            font-size: 12px;
            color: #999;
            margin-top: 20px;
            text-align: center;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 18px;
            cursor: pointer;
            color: #999;
        }
        .tips-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #4CAF50;
            color: #fff;
            padding: 8px 16px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 9998;
            display: none;
        }
        .lock-tips {
            background: #f44336;
        }
        .review-content {
            text-align: left;
            margin-bottom: 15px;
            font-size: 14px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="header">è±†åŒ…æ­æ¡£Â·æ¬§æ˜“ä¸“å±äº¤æ˜“è¾…åŠ©å·¥å…·</div>
    <div class="status" id="lossStatus">æ¬§æ˜“å·²è¿æ¥ | ä¿è¯é‡‘ä½¿ç”¨ç‡: 35% | å¤šç©ºæ¯”: 2:1 | å½“æ—¥äºæŸ: 0 USDT</div>
    
    <!-- å¸ç§åˆ‡æ¢æ ‡ç­¾ -->
    <div class="coin-tab">
        <button class="active" onclick="switchCoin('BTC')">BTC</button>
        <button onclick="switchCoin('ETH')">ETH</button>
        <button onclick="switchCoin('SOL')">SOL</button>
        <button onclick="switchCoin('ADA')">ADA</button>
    </div>

    <div class="analysis" id="coinAnalysis">
        <div>è±†åŒ…åŠå°æ—¶è¡Œæƒ…è§£è¯» | ä¸‹æ¬¡è§£è¯»: 15:30</div>
        <br>
        <div>15:00 æœ€æ–°è§£è¯»</div>
        <div>BTCå½“å‰ä»·æ ¼$61937ï¼Œ15m Kçº¿å½¢æˆåŒåº•å½¢æ€ï¼ŒMACDé‡‘å‰ï¼ŒRSI50ï¼ˆä¸­æ€§ï¼‰ï¼Œå¤šç©ºæ¯”2:1ã€‚</div>
        <div>å»ºè®®ï¼šç»§ç»­æŒæœ‰å¤šå•ï¼Œæ­¢ç›ˆä½$62500ï¼Œæ­¢æŸä½$61500ï¼›è‹¥è·Œç ´$61500ï¼Œç«‹å³å¹³ä»“åæ‰‹åšç©ºã€‚</div>
    </div>

    <!-- æ ¸å¿ƒé£æ§æ¨¡å— -->
    <div class="risk-group">
        <div class="risk-title">ğŸ”¥ é£é™©æ§åˆ¶ä¸­å¿ƒ</div>
        <!-- åŠ¨æ€ä»“ä½è®¡ç®—å™¨ -->
        <div class="input-group">
            <label>æ€»èµ„é‡‘ï¼ˆUSDTï¼‰ï¼š</label>
            <input type="number" id="totalFund" placeholder="è¾“å…¥æ€»èµ„é‡‘">
        </div>
        <div class="input-group">
            <label>é£é™©å®¹å¿åº¦ï¼ˆ%ï¼‰ï¼š</label>
            <input type="number" id="riskRate" placeholder="å¦‚2ï¼ˆå•æ¬¡äº2%ï¼‰" value="2">
        </div>
        <div class="input-group">
            <label>æ æ†å€æ•°ï¼š</label>
            <input type="number" id="leverage" placeholder="å¦‚10" value="10">
        </div>
        <div class="input-group">
            <label>æ­¢æŸç‚¹æ•°ï¼ˆUSDTï¼‰ï¼š</label>
            <input type="number" id="stopLossPoint" placeholder="å¦‚500">
        </div>
        <button class="func-btn" onclick="calcPosition()">è®¡ç®—æœ€ä½³å¼€ä»“é‡</button>

        <!-- å½“æ—¥äºæŸé™é¢ -->
        <div class="input-group" style="margin-top:15px;">
            <label>å½“æ—¥æœ€å¤§äºæŸé™é¢ï¼ˆUSDTï¼‰ï¼š</label>
            <input type="number" id="maxLossLimit" placeholder="å¦‚1000">
        </div>
        <div class="input-group">
            <label>å½“å‰å½“æ—¥äºæŸï¼ˆUSDTï¼‰ï¼š</label>
            <input type="number" id="currentLoss" placeholder="å¦‚300" value="0">
        </div>
        <button class="func-btn secondary" onclick="updateLossStatus()">æ›´æ–°äºæŸçŠ¶æ€</button>
        <button class="func-btn danger" onclick="lockTrade()" id="lockBtn">é”å®šå¼€ä»“åŠŸèƒ½</button>
    </div>

    <!-- åŠŸèƒ½æŒ‰é’®ç»„ -->
    <div class="func-btn-group">
        <button class="func-btn" onclick="switchKlineCycle()">åˆ‡æ¢Kçº¿å‘¨æœŸ</button>
        <button class="func-btn" onclick="startStopProfitLoss()">å¯åŠ¨æ­¢ç›ˆæ­¢æŸ</button>
        <button class="func-btn secondary" onclick="calculateRisk()">è®¡ç®—é£é™©</button>
        <button class="func-btn secondary" onclick="toggleIndicator()">æ˜¾ç¤º/éšè—æŒ‡æ ‡</button>
    </div>

    <div class="shortcut">
        å¤‡ç”¨å¿«æ·é”®ï¼šF1-åˆ‡æ¢Kçº¿å‘¨æœŸ | F2-å¯åŠ¨æ­¢ç›ˆæ­¢æŸ | F3-è®¡ç®—é£é™© | F4-æ˜¾ç¤º/éšè—æŒ‡æ ‡
    </div>

    <!-- ä»·æ ¼é¢„è­¦å¼¹çª— -->
    <div class="alert-box" id="alertBox">
        <span class="close-btn" onclick="closeAlert()">&times;</span>
        <div class="alert-title">ä»·æ ¼é¢„è­¦</div>
        <div id="alertContent">BTCå·²è·Œç ´æ­¢æŸä»·$61500ï¼Œå»ºè®®ç«‹å³å¹³ä»“ï¼</div>
        <br>
        <button class="alert-btn confirm-btn" id="jumpBtn" onclick="jumpToOKX('BTC')">è·³è½¬æ¬§æ˜“å¹³ä»“</button>
        <button class="alert-btn ignore-btn" onclick="closeAlert()">å¿½ç•¥</button>
    </div>

    <!-- äºæŸè¶…é™é¢„è­¦å¼¹çª— -->
    <div class="alert-box danger-alert" id="lossAlertBox" style="display:none;">
        <span class="close-btn" onclick="closeLossAlert()">&times;</span>
        <div class="alert-title">âš ï¸ äºæŸè¶…é™é¢„è­¦</div>
        <div id="lossAlertContent">å½“æ—¥äºæŸå·²è¾¾800 USDTï¼Œæ¥è¿‘é™é¢1000 USDTï¼</div>
        <br>
        <button class="alert-btn confirm-btn" onclick="lockTrade()">ç«‹å³é”å®šå¼€ä»“</button>
        <button class="alert-btn ignore-btn" onclick="closeLossAlert()">ç»§ç»­äº¤æ˜“</button>
    </div>

    <!-- æ¯å°æ—¶å¤ç›˜å¼¹çª— -->
    <div class="alert-box review-alert" id="reviewAlertBox" style="display:none;">
        <span class="close-btn" onclick="closeReviewAlert()">&times;</span>
        <div class="alert-title review-title">â° æ¯å°æ—¶è¡Œæƒ…å¤ç›˜æŠ¥å‘Š</div>
        <div class="review-content" id="reviewContent"></div>
        <button class="alert-btn confirm-btn" onclick="closeReviewAlert()">ç¡®è®¤</button>
    </div>

    <!-- æç¤ºå¼¹çª— -->
    <div class="tips-box" id="tipsBox"></div>

    <script>
        let currentCoin = 'BTC';
        let klineCycle = '15m';
        let indicatorShow = true;
        let isTradeLocked = false; // å¼€ä»“åŠŸèƒ½é”å®šçŠ¶æ€
        const coinData = {
            BTC: {
                price: 61937,
                analysis: 'BTCå½“å‰ä»·æ ¼$61937ï¼Œ15m Kçº¿å½¢æˆåŒåº•å½¢æ€ï¼ŒMACDé‡‘å‰ï¼ŒRSI50ï¼ˆä¸­æ€§ï¼‰ï¼Œå¤šç©ºæ¯”2:1ã€‚å»ºè®®ï¼šç»§ç»­æŒæœ‰å¤šå•ï¼Œæ­¢ç›ˆä½$62500ï¼Œæ­¢æŸä½$61500ï¼›è‹¥è·Œç ´$61500ï¼Œç«‹å³å¹³ä»“åæ‰‹åšç©ºã€‚',
                stopLoss: 61500,
                fundingRate: 0.015, // èµ„é‡‘è´¹ç‡
                volume: 12000 // æˆäº¤é‡
            },
            ETH: {
                price: 3215,
                analysis: 'ETHå½“å‰ä»·æ ¼$3215ï¼Œ1h Kçº¿å‘ˆä¸Šå‡è¶‹åŠ¿ï¼ŒMACDçº¢æŸ±æ”¾å¤§ï¼ŒRSI60ï¼ˆåå¤šï¼‰ï¼Œå¤šç©ºæ¯”1.8:1ã€‚å»ºè®®ï¼šå¼€å¤šå•ï¼Œæ­¢ç›ˆä½$3300ï¼Œæ­¢æŸä½$3180ã€‚',
                stopLoss: 3180,
                fundingRate: 0.012,
                volume: 8000
            },
            SOL: {
                price: 124.5,
                analysis: 'SOLå½“å‰ä»·æ ¼$124.5ï¼Œ4h Kçº¿é¡¶èƒŒç¦»ï¼ŒMACDæ­»å‰ï¼ŒRSI70ï¼ˆè¶…ä¹°ï¼‰ï¼Œå¤šç©ºæ¯”1.2:1ã€‚å»ºè®®ï¼šå¹³ä»“å¤šå•ï¼Œåæ‰‹å¼€ç©ºï¼Œæ­¢ç›ˆä½$118ï¼Œæ­¢æŸä½$126ã€‚',
                stopLoss: 126,
                fundingRate: 0.025,
                volume: 15000
            },
            ADA: {
                price: 0.58,
                analysis: 'ADAå½“å‰ä»·æ ¼$0.58ï¼Œæ—¥çº¿Kçº¿æ¨ªç›˜æ•´ç†ï¼ŒMACDèµ°å¹³ï¼ŒRSI45ï¼ˆä¸­æ€§ï¼‰ï¼Œå¤šç©ºæ¯”1:1ã€‚å»ºè®®ï¼šè§‚æœ›ï¼Œçªç ´$0.6å¼€å¤šï¼Œè·Œç ´$0.55å¼€ç©ºã€‚',
                stopLoss: 0.55,
                fundingRate: 0.008,
                volume: 5000
            }
        };

        // æ˜¾ç¤ºæç¤ºæ¡†
        function showTips(text, isDanger = false) {
            const tipsBox = document.getElementById('tipsBox');
            tipsBox.innerText = text;
            tipsBox.className = isDanger ? 'tips-box lock-tips' : 'tips-box';
            tipsBox.style.display = 'block';
            setTimeout(() => {
                tipsBox.style.display = 'none';
            }, 3000);
        }

        // åˆ‡æ¢å¸ç§
        function switchCoin(coin) {
            if (isTradeLocked) {
                showTips('å½“å‰å·²é”å®šå¼€ä»“ï¼Œæ— æ³•åˆ‡æ¢å¸ç§', true);
                return;
            }
            currentCoin = coin;
            document.querySelectorAll('.coin-tab button').forEach(btn => {
                btn.classList.remove('active');
                if (btn.innerText === coin) btn.classList.add('active');
            });
            const analysisEl = document.getElementById('coinAnalysis');
            analysisEl.innerHTML = `
                <div>è±†åŒ…åŠå°æ—¶è¡Œæƒ…è§£è¯» | ä¸‹æ¬¡è§£è¯»: ${getNextHourTime()}</div>
                <br>
                <div>${new Date().getHours()}:00 æœ€æ–°è§£è¯»</div>
                <div>${coinData[coin].analysis}</div>
            `;
            document.getElementById('alertContent').innerText = `${coin}å·²è·Œç ´æ­¢æŸä»·$${coinData[coin].stopLoss}ï¼Œå»ºè®®ç«‹å³å¹³ä»“ï¼`;
            document.getElementById('jumpBtn').setAttribute('onclick', `jumpToOKX('${coin}')`);
        }

        // 1. åˆ‡æ¢Kçº¿å‘¨æœŸ
        function switchKlineCycle() {
            if (isTradeLocked) {
                showTips('å½“å‰å·²é”å®šå¼€ä»“ï¼Œæ— æ³•æ“ä½œ', true);
                return;
            }
            const cycles = ['15m', '1h', '4h', '1d'];
            const currentIndex = cycles.indexOf(klineCycle);
            klineCycle = cycles[(currentIndex + 1) % cycles.length];
            showTips(`å·²åˆ‡æ¢ä¸º${klineCycle} Kçº¿å‘¨æœŸ`);
        }

        // 2. å¯åŠ¨æ­¢ç›ˆæ­¢æŸ
        function startStopProfitLoss() {
            if (isTradeLocked) {
                showTips('å½“å‰å·²é”å®šå¼€ä»“ï¼Œæ— æ³•æ“ä½œ', true);
                return;
            }
            const takeProfit = document.getElementById('takeProfit').value;
            const stopLoss = document.getElementById('stopLoss').value;
            if (!takeProfit || !stopLoss) {
                showTips('è¯·å…ˆè¾“å…¥æ­¢ç›ˆä»·å’Œæ­¢æŸä»·');
                return;
            }
            showTips(`å·²å¯åŠ¨${currentCoin}æ­¢ç›ˆæ­¢æŸç›‘æ§ï¼Œæ­¢ç›ˆï¼š$${takeProfit}ï¼Œæ­¢æŸï¼š$${stopLoss}`);
        }

        // 3. æ—§ç‰ˆé£é™©è®¡ç®—
        function calculateRisk() {
            if (isTradeLocked) {
                showTips('å½“å‰å·²é”å®šå¼€ä»“ï¼Œæ— æ³•æ“ä½œ', true);
                return;
            }
            const totalFund = prompt('è¯·è¾“å…¥æ€»èµ„é‡‘ï¼ˆUSDTï¼‰ï¼š');
            const leverage = prompt('è¯·è¾“å…¥æ æ†å€æ•°ï¼š');
            if (!totalFund || isNaN(totalFund) || !leverage || isNaN(leverage)) {
                showTips('è¾“å…¥æ— æ•ˆï¼Œè¯·è¾“å…¥æ•°å­—');
                return;
            }
            const maxLoss = (totalFund * 0.02).toFixed(2);
            const suggestPosition = (totalFund * 0.1 / leverage).toFixed(2);
            showTips(`é£é™©è®¡ç®—ç»“æœï¼šæœ€å¤§å¯äºæŸ${maxLoss} USDTï¼Œå»ºè®®ä»“ä½${suggestPosition} USDT`);
        }

        // 4. æ˜¾ç¤º/éšè—æŒ‡æ ‡
        function toggleIndicator() {
            indicatorShow = !indicatorShow;
            showTips(indicatorShow ? 'å·²æ˜¾ç¤ºæŠ€æœ¯æŒ‡æ ‡' : 'å·²éšè—æŠ€æœ¯æŒ‡æ ‡');
        }

        // ========== æ ¸å¿ƒé£æ§åŠŸèƒ½1ï¼šåŠ¨æ€ä»“ä½è®¡ç®—å™¨ ==========
        function calcPosition() {
            if (isTradeLocked) {
                showTips('å½“å‰å·²é”å®šå¼€ä»“ï¼Œæ— æ³•æ“ä½œ', true);
                return;
            }
            const totalFund = parseFloat(document.getElementById('totalFund').value) || 0;
            const riskRate = parseFloat(document.getElementById('riskRate').value) || 2;
            const leverage = parseFloat(document.getElementById('leverage').value) || 10;
            const stopLossPoint = parseFloat(document.getElementById('stopLossPoint').value) || 0;

            if (totalFund <= 0 || leverage <= 0 || stopLossPoint <= 0) {
                showTips('è¯·å¡«å†™æœ‰æ•ˆçš„èµ„é‡‘/æ æ†/æ­¢æŸç‚¹æ•°');
                return;
            }

            // æ ¸å¿ƒå…¬å¼ï¼šæœ€å¤§å¯äºæŸé‡‘é¢ = æ€»èµ„é‡‘ * é£é™©å®¹å¿åº¦
            const maxLossAmount = (totalFund * (riskRate / 100)).toFixed(2);
            // æœ€ä½³å¼€ä»“é‡ = æœ€å¤§å¯äºæŸé‡‘é¢ * æ æ† / æ­¢æŸç‚¹æ•°
            const bestPosition = ((maxLossAmount * leverage) / stopLossPoint).toFixed(4);

            showTips(`âœ… ä»“ä½è®¡ç®—ç»“æœï¼š
æœ€å¤§å¯äº ${maxLossAmount} USDT
æœ€ä½³å¼€ä»“ ${bestPosition} ${currentCoin}
ï¼ˆä¸¥æ ¼æ§åˆ¶é£é™©ï¼Œå‹¿è¶…ä»“ï¼‰`);
        }

        // ========== æ ¸å¿ƒé£æ§åŠŸèƒ½2ï¼šå½“æ—¥äºæŸé™é¢é¢„è­¦ ==========
        function updateLossStatus() {
            const maxLossLimit = parseFloat(document.getElementById('maxLossLimit').value) || 0;
            const currentLoss = parseFloat(document.getElementById('currentLoss').value) || 0;
            const lossStatusEl = document.getElementById('lossStatus');

            if (maxLossLimit <= 0) {
                showTips('è¯·è®¾ç½®æœ‰æ•ˆçš„æœ€å¤§äºæŸé™é¢');
                return;
            }

            // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
            lossStatusEl.innerText = `æ¬§æ˜“å·²è¿æ¥ | ä¿è¯é‡‘ä½¿ç”¨ç‡: 35% | å¤šç©ºæ¯”: 2:1 | å½“æ—¥äºæŸ: ${currentLoss} USDT / é™é¢ ${maxLossLimit} USDT`;
            
            // äºæŸè¾¾80%é¢„è­¦ï¼Œè¾¾100%å¼ºåˆ¶æé†’é”å®š
            const lossRatio = (currentLoss / maxLossLimit) * 100;
            if (lossRatio >= 100) {
                lossStatusEl.className = 'status danger-status';
                document.getElementById('lossAlertContent').innerText = `å½“æ—¥äºæŸå·²è¾¾${currentLoss} USDTï¼Œè¶…è¿‡é™é¢${maxLossLimit} USDTï¼`;
                document.getElementById('lossAlertBox').style.display = 'block';
            } else if (lossRatio >= 80) {
                lossStatusEl.className = 'status danger-status';
                showTips(`âš ï¸ å½“æ—¥äºæŸå·²è¾¾${lossRatio.toFixed(0)}%ï¼Œæ¥è¿‘é™é¢ï¼`, true);
            } else {
                lossStatusEl.className = 'status';
            }
        }

        // é”å®š/è§£é”å¼€ä»“åŠŸèƒ½
        function lockTrade() {
            isTradeLocked = !isTradeLocked;
            const lockBtn = document.getElementById('lockBtn');
            if (isTradeLocked) {
                lockBtn.innerText = 'è§£é”å¼€ä»“åŠŸèƒ½';
                lockBtn.className = 'func-btn secondary';
                showTips('ğŸ”’ å·²é”å®šå¼€ä»“åŠŸèƒ½ï¼Œç¦æ­¢ä»»ä½•äº¤æ˜“æ“ä½œ', true);
            } else {
                lockBtn.innerText = 'é”å®šå¼€ä»“åŠŸèƒ½';
                lockBtn.className = 'func-btn danger';
                showTips('ğŸ”“ å·²è§£é”å¼€ä»“åŠŸèƒ½ï¼Œè¯·æ³¨æ„æ§åˆ¶é£é™©');
            }
        }

        // è·³è½¬æ¬§æ˜“
        function jumpToOKX(coin) {
            const okxAppUrl = `okex://trade/${coin.toLowerCase()}-usdt/contract`; 
            const okxWebUrl = `https://www.okx.com/trade/contract/${coin.toLowerCase()}-usdt`;
            window.location.href = okxAppUrl;
            setTimeout(() => {
                window.open(okxWebUrl, '_blank');
            }, 2000);
            closeAlert();
        }

        // å…³é—­å¼¹çª—
        function closeAlert() {
            document.getElementById('alertBox').style.display = 'none';
        }
        function closeLossAlert() {
            document.getElementById('lossAlertBox').style.display = 'none';
        }
        function closeReviewAlert() {
            document.getElementById('reviewAlertBox').style.display = 'none';
        }

        // ========== æ ¸å¿ƒæ–°å¢ï¼šæ¯å°æ—¶è‡ªåŠ¨å¤ç›˜åŠŸèƒ½ ==========
        // è·å–ä¸‹ä¸€ä¸ªæ•´ç‚¹æ—¶é—´
        function getNextHourTime() {
            const now = new Date();
            const nextHour = now.getHours() + 1;
            return `${nextHour < 10 ? '0' + nextHour : nextHour}:00`;
        }

        // ç”Ÿæˆå¤ç›˜æŠ¥å‘Š
        function generateReviewReport() {
            const now = new Date();
            const hour = now.getHours();
            const coin = currentCoin;
            const data = coinData[coin];
            
            // è¶‹åŠ¿åˆ¤æ–­ï¼ˆåŸºäºKçº¿å‘¨æœŸå’ŒæŒ‡æ ‡ï¼‰
            let trend = 'éœ‡è¡';
            if (klineCycle === '1h' && data.price > data.stopLoss * 1.01) trend = 'ä¸Šå‡';
            if (klineCycle === '1h' && data.price < data.stopLoss * 0.99) trend = 'ä¸‹é™';

            // èµ„é‡‘è´¹ç‡åˆ¤æ–­æƒ…ç»ª
            let sentiment = 'ä¸­æ€§';
            if (data.fundingRate > 0.02) sentiment = 'å¤šå¤´ç‹‚çƒ­ï¼ˆè­¦æƒ•å›è°ƒï¼‰';
            if (data.fundingRate < -0.01) sentiment = 'ç©ºå¤´ä¸»å¯¼ï¼ˆè°¨æ…æŠ„åº•ï¼‰';

            // æˆäº¤é‡åˆ¤æ–­æ´»è·ƒåº¦
            let activity = 'ä¸€èˆ¬';
            if (data.volume > 10000) activity = 'é«˜ï¼ˆèµ„é‡‘æ´»è·ƒï¼‰';
            if (data.volume < 5000) activity = 'ä½ï¼ˆè§‚æœ›ä¸ºä¸»ï¼‰';

            // ç”Ÿæˆç»“æ„åŒ–æŠ¥å‘Š
            const report = `
ã€æ—¶é—´ã€‘${hour}:00
ã€å¸ç§ã€‘${coin}
ã€å½“å‰ä»·æ ¼ã€‘$${data.price}
ã€è¶‹åŠ¿åˆ¤æ–­ã€‘${trend}
ã€èµ„é‡‘è´¹ç‡ã€‘${data.fundingRate}% â†’ ${sentiment}
ã€æˆäº¤é‡ã€‘${data.volume} â†’ ${activity}
ã€æ“ä½œå»ºè®®ã€‘${data.analysis.split('å»ºè®®ï¼š')[1]}
ã€é£æ§æé†’ã€‘å½“å‰æ æ†${document.getElementById('leverage').value}å€ï¼Œå•æ¬¡äºæŸæ§åˆ¶åœ¨${document.getElementById('riskRate').value}%ä»¥å†…
            `;
            return report;
        }

        // å®šæ—¶è§¦å‘å¤ç›˜ï¼ˆæ¯å°æ—¶æ•´ç‚¹ï¼‰
        function startReviewTimer() {
            // ç«‹å³ç”Ÿæˆä¸€æ¬¡å½“å‰æ—¶é—´çš„æŠ¥å‘Š
            document.getElementById('reviewContent').innerText = generateReviewReport();
            
            // è®¡ç®—è·ç¦»ä¸‹ä¸€ä¸ªæ•´ç‚¹çš„æ—¶é—´å·®ï¼ˆæ¯«ç§’ï¼‰
            const now = new Date();
            const nextHour = new Date(now);
            nextHour.setHours(now.getHours() + 1);
            nextHour.setMinutes(0);
            nextHour.setSeconds(0);
            nextHour.setMilliseconds(0);
            const timeDiff = nextHour - now;

            // å®šæ—¶å™¨ï¼šæ¯å°æ—¶è§¦å‘ä¸€æ¬¡
            setTimeout(() => {
                document.getElementById('reviewContent').innerText = generateReviewReport();
                document.getElementById('reviewAlertBox').style.display = 'block';
                // å¾ªç¯è§¦å‘
                setInterval(() => {
                    document.getElementById('reviewContent').innerText = generateReviewReport();
                    document.getElementById('reviewAlertBox').style.display = 'block';
                }, 3600000); // 3600000ms = 1å°æ—¶
            }, timeDiff);
        }

        // ç§»åŠ¨ç«¯è§¦æ‘¸é€‚é…
        document.querySelectorAll('.alert-btn, .coin-tab button, .func-btn').forEach(btn => {
            btn.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.click();
            }, { passive: false });
        });

        // åˆå§‹åŠ è½½
        window.onload = function() {
            document.getElementById('alertBox').style.display = 'block';
            // å¯åŠ¨æ¯å°æ—¶å¤ç›˜å®šæ—¶å™¨
            startReviewTimer();
        };
    </script>
</body>
</html>